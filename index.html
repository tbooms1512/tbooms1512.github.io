<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Tomas Boom - Perfil Personal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f4f4f5;
      color: #111827;
    }
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      min-height: 100vh;
      background: #f4f4f5;
    }

    header {
      padding: 2rem 1.5rem 1.5rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      position: relative;
      overflow: hidden;
    }
    header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse"><path d="M 20 0 L 0 0 0 20" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
      opacity: 0.3;
    }
    .header-content {
      max-width: 1000px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
    }
    .profile-section {
      display: flex;
      gap: 2rem;
      align-items: flex-start;
      flex-wrap: wrap;
      margin-bottom: 1.5rem;
    }
    .profile-image-container {
      position: relative;
    }
    .profile-image {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      border: 4px solid rgba(255, 255, 255, 0.3);
      object-fit: cover;
      background: rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    }
    .profile-image-placeholder {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      border: 4px solid rgba(255, 255, 255, 0.3);
      background: rgba(255, 255, 255, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    }
    .profile-info {
      flex: 1;
      min-width: 250px;
    }
    .profile-name {
      font-size: 2.5rem;
      font-weight: 700;
      margin: 0 0 0.5rem;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }
    .profile-title {
      font-size: 1.2rem;
      margin: 0 0 1rem;
      opacity: 0.95;
      font-weight: 400;
    }
    .profile-bio {
      font-size: 1rem;
      line-height: 1.6;
      margin: 0 0 1rem;
      opacity: 0.9;
    }
    .contact-info {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 1rem;
    }
    .contact-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(255, 255, 255, 0.2);
      padding: 0.5rem 1rem;
      border-radius: 999px;
      backdrop-filter: blur(10px);
      font-size: 0.9rem;
    }
    .contact-item a {
      color: white;
      text-decoration: none;
    }
    .contact-item a:hover {
      text-decoration: underline;
    }

    .controls {
      max-width: 1000px;
      margin: 0 auto;
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      position: relative;
      z-index: 1;
    }
    .controls input,
    .controls select {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      padding: 0.5rem 0.9rem;
      color: white;
      font-size: 0.9rem;
      outline: none;
    }
    .controls input::placeholder {
      color: rgba(255, 255, 255, 0.7);
    }
    .controls input:focus,
    .controls select:focus {
      border-color: rgba(255, 255, 255, 0.6);
      box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.2);
      background: rgba(255, 255, 255, 0.3);
    }
    .controls select option {
      background: #667eea;
      color: white;
    }

    main {
      max-width: 1000px;
      margin: 1.5rem auto 2rem;
      padding: 0 1rem 2rem;
    }

    .section-card {
      background: #ffffff;
      border-radius: 1rem;
      padding: 1.5rem;
      border: 1px solid #e5e7eb;
      margin-bottom: 1.25rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.03);
    }
    .section-card h2 {
      font-size: 1.3rem;
      margin: 0 0 0.5rem;
      color: #111827;
    }
    .section-card p {
      font-size: 0.9rem;
      margin: 0 0 1rem;
      color: #6b7280;
      line-height: 1.6;
    }

    #addSkillForm {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      align-items: flex-end;
    }
    #addSkillForm label {
      font-size: 0.75rem;
      color: #6b7280;
      display: block;
      margin-bottom: 0.1rem;
      font-weight: 500;
    }
    #addSkillForm input,
    #addSkillForm textarea {
      width: 100%;
      padding: 0.5rem 0.7rem;
      border-radius: 0.6rem;
      border: 1px solid #d1d5db;
      background: #f9fafb;
      color: #111827;
      font-size: 0.9rem;
      outline: none;
      font-family: inherit;
    }
    #addSkillForm input:focus,
    #addSkillForm textarea:focus {
      border-color: #667eea;
      box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
      background: #ffffff;
    }
    .form-field {
      flex: 1 1 200px;
      min-width: 180px;
    }
    .form-field.year {
      width: 120px;
      flex: 0 0 auto;
    }
    .form-field.full {
      flex: 1 1 100%;
    }
    .form-button {
      padding: 0.6rem 1.2rem;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      flex: 0 0 auto;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .form-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }
    .form-button.secondary {
      background: #e5e7eb;
      color: #374151;
    }
    .form-button.secondary:hover {
      background: #d4d4d8;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .skills-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.25rem;
      margin-top: 1rem;
    }
    .skill-card {
      background: #ffffff;
      border-radius: 1rem;
      padding: 1.2rem;
      border: 1px solid #e5e7eb;
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.04);
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .skill-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08);
    }
    .skill-header {
      display: flex;
      justify-content: space-between;
      gap: 0.5rem;
      align-items: flex-start;
    }
    .skill-title {
      font-weight: 600;
      font-size: 1.1rem;
      color: #111827;
    }
    .skill-year {
      color: #6b7280;
      font-size: 0.85rem;
    }
    .skill-category {
      font-size: 0.8rem;
      color: #6b7280;
      margin-top: 0.2rem;
    }
    .badge {
      font-size: 0.7rem;
      border-radius: 999px;
      padding: 0.2rem 0.7rem;
      border: 1px solid #e5e7eb;
      color: #4b5563;
      background: #f9fafb;
      white-space: nowrap;
      font-weight: 500;
    }

    .stars {
      display: flex;
      gap: 0.2rem;
      font-size: 1.3rem;
      cursor: pointer;
      user-select: none;
    }
    .stars span {
      transition: transform 0.1s ease-out;
      color: #d1d5db;
    }
    .stars span:hover {
      transform: scale(1.2);
    }
    .stars .active {
      color: #fbbf24;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
    }

    .note-label {
      font-size: 0.75rem;
      color: #6b7280;
      margin-top: 0.2rem;
      font-weight: 500;
    }
    textarea {
      width: 100%;
      min-height: 80px;
      resize: vertical;
      border-radius: 0.7rem;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      color: #111827;
      padding: 0.6rem;
      font-size: 0.85rem;
      outline: none;
      font-family: inherit;
    }
    textarea:focus {
      border-color: #667eea;
      box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
      background: #ffffff;
    }

    .meta-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 0.25rem;
      gap: 0.5rem;
      font-size: 0.75rem;
      color: #6b7280;
      flex-wrap: wrap;
    }
    .date-input {
      background: transparent;
      border: none;
      border-bottom: 1px dashed #d1d5db;
      color: inherit;
      font-size: inherit;
      padding: 0.1rem 0;
      outline: none;
    }
    .pill {
      font-size: 0.75rem;
      background: #f3f4f6;
      border-radius: 999px;
      padding: 0.2rem 0.7rem;
      border: 1px solid #e5e7eb;
      color: #4b5563;
    }

    .actions-row {
      display: flex;
      justify-content: flex-end;
      gap: 0.5rem;
      margin-top: 0.5rem;
      padding-top: 0.5rem;
      border-top: 1px solid #f3f4f6;
    }
    .action-button {
      font-size: 0.75rem;
      padding: 0.3rem 0.8rem;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      color: #4b5563;
      cursor: pointer;
      transition: all 0.2s;
    }
    .action-button:hover {
      background: #e5e7eb;
    }
    .action-button.delete {
      border-color: #fecaca;
      background: #fef2f2;
      color: #b91c1c;
    }
    .action-button.delete:hover {
      background: #fee2e2;
    }

    .empty-state {
      text-align: center;
      margin-top: 3rem;
      color: #9ca3af;
      font-size: 1rem;
      padding: 2rem;
    }

    footer {
      text-align: center;
      color: #9ca3af;
      font-size: 0.85rem;
      padding: 2rem 1rem;
      background: #ffffff;
      border-top: 1px solid #e5e7eb;
    }

    @media (max-width: 768px) {
      .profile-name {
        font-size: 2rem;
      }
      .profile-section {
        flex-direction: column;
        align-items: center;
        text-align: center;
      }
      .contact-info {
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <div class="profile-section">
        <div class="profile-image-container">
          <!-- Coloca tu foto en images/profile.jpg o images/profile.jpeg -->
          <img src="images/profile.jpg" alt="Tomas Boom" class="profile-image" id="profileImg" onerror="tryAlternativeImage(this);">
          <div class="profile-image-placeholder" id="profilePlaceholder" style="display:none;">üë§</div>
        </div>
        <div class="profile-info">
          <h1 class="profile-name" id="profileName">Tomas Boom</h1>
          <p class="profile-title" id="profileTitle">Desarrollador & Estudiante</p>
          <p class="profile-bio" id="profileBio">
            Apasionado por la tecnolog√≠a, el desarrollo de software y el aprendizaje continuo. 
            Me encanta crear soluciones innovadoras y compartir conocimiento con otros.
          </p>
          <div class="contact-info">
            <div class="contact-item">
              <span>üìß</span>
              <a href="mailto:tu-email@ejemplo.com" id="emailLink">tu-email@ejemplo.com</a>
            </div>
            <div class="contact-item">
              <span>üíº</span>
              <a href="https://github.com/tbooms1512" target="_blank" id="githubLink">GitHub</a>
            </div>
            <div class="contact-item">
              <span>üîó</span>
              <a href="https://linkedin.com/in/tu-perfil" target="_blank" id="linkedinLink">LinkedIn</a>
            </div>
          </div>
        </div>
      </div>
      <div class="controls">
        <input
          type="text"
          id="searchInput"
          placeholder="Buscar habilidad o logro..."
        />
        <select id="ratingFilter">
          <option value="0">Todas las calificaciones</option>
          <option value="3">Solo 3‚≠ê o m√°s</option>
          <option value="4">Solo 4‚≠ê o m√°s</option>
          <option value="5">Solo 5‚≠ê</option>
        </select>
        <select id="categoryFilter">
          <option value="">Todas las categor√≠as</option>
          <option value="Tecnolog√≠a">Tecnolog√≠a</option>
          <option value="Programaci√≥n">Programaci√≥n</option>
          <option value="Habilidades">Habilidades</option>
          <option value="Logros">Logros</option>
          <option value="Intereses">Intereses</option>
        </select>
      </div>
    </div>
  </header>

  <main>
    <section class="section-card">
      <h2 id="formTitle">Agregar nueva habilidad o logro</h2>
      <p id="formDescription">
        Documenta tus habilidades, logros, proyectos o intereses. Cada entrada es como una "rese√±a" 
        de algo que has aprendido o logrado. Puedes calificarlo y agregar notas sobre tu experiencia.
      </p>
      <form id="addSkillForm">
        <div class="form-field">
          <label for="newTitle">T√≠tulo / Nombre</label>
          <input
            type="text"
            id="newTitle"
            required
            placeholder="Ej. Python, Docker, Proyecto X"
          />
        </div>
        <div class="form-field year">
          <label for="newYear">A√±o</label>
          <input
            type="number"
            id="newYear"
            placeholder="2024"
            min="2000"
            max="2100"
          />
        </div>
        <div class="form-field">
          <label for="newCategory">Categor√≠a</label>
          <input
            type="text"
            id="newCategory"
            placeholder="Ej. Programaci√≥n, Tecnolog√≠a, Logros"
          />
        </div>
        <div class="form-field full">
          <label for="newDescription">Descripci√≥n breve</label>
          <input
            type="text"
            id="newDescription"
            placeholder="Ej. Framework web moderno, Base de datos NoSQL"
          />
        </div>
        <button type="submit" id="formButton" class="form-button">
          Agregar
        </button>
        <button
          type="button"
          id="cancelEditButton"
          class="form-button secondary"
          style="display:none;"
        >
          Cancelar
        </button>
      </form>
    </section>

    <section id="skillsSection">
      <div class="skills-grid" id="skillsGrid"></div>
      <div class="empty-state" id="emptyState" style="display:none;">
        No hay habilidades o logros que coincidan con la b√∫squeda o el filtro.
      </div>
    </section>
  </main>

  <footer>
    <p>Hecho por Tomas Boom</p>
    <p style="margin-top: 0.5rem; font-size: 0.75rem;">√öltima actualizaci√≥n: <span id="lastUpdate"></span></p>
  </footer>

  <script>
    // üîπ Lista base de habilidades/logros (puedes personalizar estas)
    const baseSkills = [
      {
        id: "python",
        title: "Python",
        year: 2023,
        category: "Programaci√≥n",
        description: "Lenguaje de programaci√≥n vers√°til"
      },
      {
        id: "fastapi",
        title: "FastAPI",
        year: 2024,
        category: "Tecnolog√≠a",
        description: "Framework web moderno para APIs"
      },
      {
        id: "docker",
        title: "Docker",
        year: 2024,
        category: "Tecnolog√≠a",
        description: "Contenedores y orquestaci√≥n"
      },
      {
        id: "mongodb",
        title: "MongoDB",
        year: 2024,
        category: "Tecnolog√≠a",
        description: "Base de datos NoSQL"
      }
    ];

    // üîπ Claves para localStorage
    const STATE_KEY   = "mi_perfil_estado_v1";
    const SKILLS_KEY  = "mi_perfil_habilidades_v1";
    const PROFILE_KEY = "mi_perfil_datos_v1";

    let state = {};
    let skills = [];
    let profileData = {
      name: "Tomas Boom Sanchez",
      title: "Estudiante en Ciencia de Datos",
      bio: "Estudio la licenciatura de Ciencia de Datos en el ITAM. Una de mis grandes pasiones son los deportes, en especial el futb√≥l y la NFL. Me gusta mucho convivir y hacer nuevos amigos.",
      email: "tbooms1512@gmail.com",
      github: "https://github.com/tbooms1512",
      linkedin: "https://www.linkedin.com/in/tom%C3%A1s-boom-445700345/"
    };

    // Cargar / guardar estado
    function loadState() {
      try {
        const raw = localStorage.getItem(STATE_KEY);
        state = raw ? JSON.parse(raw) : {};
      } catch (e) {
        console.error("Error leyendo estado", e);
        state = {};
      }
    }

    function saveState() {
      localStorage.setItem(STATE_KEY, JSON.stringify(state));
    }

    function getSkillState(id) {
      if (!state[id]) {
        state[id] = {
          rating: 0,
          note: "",
          achievedAt: ""
        };
      }
      return state[id];
    }

    // Cargar / guardar habilidades
    function loadSkills() {
      try {
        const raw = localStorage.getItem(SKILLS_KEY);
        skills = raw ? JSON.parse(raw) : baseSkills;
      } catch (e) {
        console.error("Error leyendo habilidades", e);
        skills = baseSkills;
      }
    }

    function saveSkills() {
      localStorage.setItem(SKILLS_KEY, JSON.stringify(skills));
    }

    // Cargar / guardar datos del perfil
    function loadProfile() {
      try {
        const raw = localStorage.getItem(PROFILE_KEY);
        if (raw) {
          profileData = { ...profileData, ...JSON.parse(raw) };
        }
      } catch (e) {
        console.error("Error leyendo perfil", e);
      }
      updateProfileUI();
    }

    function saveProfile() {
      localStorage.setItem(PROFILE_KEY, JSON.stringify(profileData));
    }

    function updateProfileUI() {
      document.getElementById("profileName").textContent = profileData.name;
      document.getElementById("profileTitle").textContent = profileData.title;
      document.getElementById("profileBio").textContent = profileData.bio;
      document.getElementById("emailLink").textContent = profileData.email;
      document.getElementById("emailLink").href = `mailto:${profileData.email}`;
      document.getElementById("githubLink").href = profileData.github;
      document.getElementById("linkedinLink").href = profileData.linkedin;
    }

    // Slug para id
    function slugify(text) {
      return text
        .toLowerCase()
        .normalize("NFD")
        .replace(/\p{Diacritic}/gu, "")
        .replace(/[^a-z0-9]+/g, "-")
        .replace(/(^-|-$)/g, "");
    }

    // Referencias al DOM
    const skillsGrid        = document.getElementById("skillsGrid");
    const emptyState        = document.getElementById("emptyState");
    const searchInput       = document.getElementById("searchInput");
    const ratingFilter      = document.getElementById("ratingFilter");
    const categoryFilter    = document.getElementById("categoryFilter");
    const addSkillForm      = document.getElementById("addSkillForm");
    const newTitleInput     = document.getElementById("newTitle");
    const newYearInput      = document.getElementById("newYear");
    const newCategoryInput  = document.getElementById("newCategory");
    const newDescriptionInput = document.getElementById("newDescription");
    const formTitle         = document.getElementById("formTitle");
    const formDescription   = document.getElementById("formDescription");
    const formButton        = document.getElementById("formButton");
    const cancelEditButton  = document.getElementById("cancelEditButton");

    let editingSkillId = null;

    function setFormToAddMode() {
      editingSkillId = null;
      addSkillForm.reset();
      formTitle.textContent = "Agregar nueva habilidad o logro";
      formDescription.textContent =
        "Documenta tus habilidades, logros, proyectos o intereses. Cada entrada es como una 'rese√±a' de algo que has aprendido o logrado.";
      formButton.textContent = "Agregar";
      cancelEditButton.style.display = "none";
    }

    function setFormToEditMode(skill) {
      editingSkillId = skill.id;
      newTitleInput.value = skill.title || "";
      newYearInput.value = skill.year || "";
      newCategoryInput.value = skill.category || "";
      newDescriptionInput.value = skill.description || "";
      formTitle.textContent = "Editar habilidad o logro";
      formDescription.textContent =
        "Est√°s editando esta entrada. Cambia lo que quieras y guarda los cambios o cancela.";
      formButton.textContent = "Guardar cambios";
      cancelEditButton.style.display = "inline-block";
    }

    function renderSkills() {
      const searchTerm = searchInput.value.toLowerCase().trim();
      const minRating = parseInt(ratingFilter.value, 10);
      const categoryFilterValue = categoryFilter.value.toLowerCase().trim();

      skillsGrid.innerHTML = "";

      const filtered = skills.filter((skill) => {
        const sState = getSkillState(skill.id);
        const text =
          (skill.title || "") +
          " " +
          (skill.category || "") +
          " " +
          (skill.description || "");
        const matchesText = text.toLowerCase().includes(searchTerm);
        const matchesRating = sState.rating >= minRating;
        const matchesCategory = !categoryFilterValue || 
          (skill.category && skill.category.toLowerCase().includes(categoryFilterValue));
        return matchesText && matchesRating && matchesCategory;
      });

      if (filtered.length === 0) {
        emptyState.style.display = "block";
        return;
      } else {
        emptyState.style.display = "none";
      }

      filtered.forEach((skill) => {
        const sState = getSkillState(skill.id);

        const card = document.createElement("article");
        card.className = "skill-card";

        const header = document.createElement("div");
        header.className = "skill-header";

        const titleBlock = document.createElement("div");
        const yearText = skill.year ? skill.year : "";
        const categoryText = skill.category || "";
        const descriptionText = skill.description || "";

        titleBlock.innerHTML = `
          <div class="skill-title">${skill.title}</div>
          ${yearText ? `<div class="skill-year">${yearText}</div>` : ""}
          ${categoryText ? `<div class="skill-category">${categoryText}</div>` : ""}
        `;

        const badge = document.createElement("div");
        badge.className = "badge";
        badge.textContent = sState.rating
          ? `${sState.rating}‚≠ê nivel`
          : "Sin calificar";

        header.appendChild(titleBlock);
        header.appendChild(badge);

        if (descriptionText) {
          const desc = document.createElement("div");
          desc.style.cssText = "font-size: 0.85rem; color: #6b7280; margin-top: 0.3rem;";
          desc.textContent = descriptionText;
          titleBlock.appendChild(desc);
        }

        const starsRow = document.createElement("div");
        starsRow.className = "stars";
        for (let i = 1; i <= 5; i++) {
          const starSpan = document.createElement("span");
          starSpan.textContent = "‚òÖ";
          if (i <= sState.rating) {
            starSpan.classList.add("active");
          }
          starSpan.addEventListener("click", () => {
            setRating(skill.id, i);
          });
          starsRow.appendChild(starSpan);
        }

        const noteLabel = document.createElement("div");
        noteLabel.className = "note-label";
        noteLabel.textContent = "Notas / experiencia:";

        const textarea = document.createElement("textarea");
        textarea.value = sState.note || "";
        textarea.placeholder = "Ej. Lo aprend√≠ en un curso, lo uso en proyectos personales, logr√© implementarlo en...";
        textarea.addEventListener("input", (e) => {
          const ss = getSkillState(skill.id);
          ss.note = e.target.value;
          saveState();
        });

        const metaRow = document.createElement("div");
        metaRow.className = "meta-row";

        const leftMeta = document.createElement("div");
        leftMeta.innerHTML = `Logrado el:
          <input
            type="date"
            class="date-input"
            value="${sState.achievedAt || ""}"
          />
        `;

        const dateInput = leftMeta.querySelector("input");
        dateInput.addEventListener("change", (e) => {
          const ss = getSkillState(skill.id);
          ss.achievedAt = e.target.value;
          saveState();
        });

        const rightMeta = document.createElement("div");
        rightMeta.className = "pill";
        rightMeta.textContent = skill.category || "General";

        metaRow.appendChild(leftMeta);
        metaRow.appendChild(rightMeta);

        const actionsRow = document.createElement("div");
        actionsRow.className = "actions-row";

        const editButton = document.createElement("button");
        editButton.type = "button";
        editButton.className = "action-button";
        editButton.textContent = "Editar";
        editButton.addEventListener("click", () => {
          setFormToEditMode(skill);
          window.scrollTo({ top: 0, behavior: "smooth" });
        });

        const deleteButton = document.createElement("button");
        deleteButton.type = "button";
        deleteButton.className = "action-button delete";
        deleteButton.textContent = "Borrar";
        deleteButton.addEventListener("click", () => {
          deleteSkill(skill.id);
        });

        actionsRow.appendChild(editButton);
        actionsRow.appendChild(deleteButton);

        card.appendChild(header);
        card.appendChild(starsRow);
        card.appendChild(noteLabel);
        card.appendChild(textarea);
        card.appendChild(metaRow);
        card.appendChild(actionsRow);

        skillsGrid.appendChild(card);
      });
    }

    function setRating(skillId, rating) {
      const ss = getSkillState(skillId);
      ss.rating = rating;
      saveState();
      renderSkills();
    }

    function deleteSkill(skillId) {
      const skill = skills.find((s) => s.id === skillId);
      const title = skill ? skill.title : "esta entrada";

      if (!confirm(`¬øSeguro que quieres borrar "${title}" de la lista?`)) {
        return;
      }

      skills = skills.filter((s) => s.id !== skillId);
      delete state[skillId];
      saveSkills();
      saveState();

      if (editingSkillId === skillId) {
        setFormToAddMode();
      }

      renderSkills();
    }

    // Eventos
    searchInput.addEventListener("input", () => renderSkills());
    ratingFilter.addEventListener("change", () => renderSkills());
    categoryFilter.addEventListener("change", () => renderSkills());

    addSkillForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const title = newTitleInput.value.trim();
      const year = newYearInput.value ? parseInt(newYearInput.value, 10) : "";
      const category = newCategoryInput.value.trim();
      const description = newDescriptionInput.value.trim();

      if (!title) {
        alert("Pon al menos un t√≠tulo üôÇ");
        return;
      }

      if (!editingSkillId) {
        let id = slugify(title);
        if (!id) {
          id = `skill-${Date.now()}`;
        }

        if (skills.some((s) => s.id === id)) {
          alert("Ya tienes una entrada con ese t√≠tulo.");
          return;
        }

        const newSkill = { id, title, year, category, description };
        skills.push(newSkill);
        saveSkills();
        setFormToAddMode();
        renderSkills();
      } else {
        const idx = skills.findIndex((s) => s.id === editingSkillId);
        if (idx !== -1) {
          skills[idx].title = title;
          skills[idx].year = year;
          skills[idx].category = category;
          skills[idx].description = description;
          saveSkills();
        }
        setFormToAddMode();
        renderSkills();
      }
    });

    cancelEditButton.addEventListener("click", () => {
      setFormToAddMode();
    });

    // Funci√≥n para intentar cargar imagen con extensi√≥n alternativa
    function tryAlternativeImage(img) {
      const currentSrc = img.src;
      const placeholder = document.getElementById("profilePlaceholder");
      
      // Si ya intent√≥ .jpeg, mostrar placeholder
      if (currentSrc.includes('.jpeg')) {
        img.style.display = 'none';
        placeholder.style.display = 'flex';
        return;
      }
      
      // Intentar con .jpeg si .jpg fall√≥
      if (currentSrc.includes('.jpg')) {
        img.src = currentSrc.replace('.jpg', '.jpeg');
        return;
      }
      
      // Si no es .jpg, intentar agregar .jpeg
      if (!currentSrc.includes('.jpeg')) {
        img.src = currentSrc.replace(/\.[^.]+$/, '.jpeg');
        return;
      }
      
      // Si todo falla, mostrar placeholder
      img.style.display = 'none';
      placeholder.style.display = 'flex';
    }

    // Inicializar
    loadState();
    loadSkills();
    loadProfile();
    setFormToAddMode();
    renderSkills();

    // Actualizar fecha
    document.getElementById("lastUpdate").textContent = new Date().toLocaleDateString('es-ES', {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    });
  </script>
</body>
</html>
